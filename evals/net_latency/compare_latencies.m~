%{
[tools] util/hires_ping, netproxy/activep4-tun
[env] Two LXC containers were connected to each other via VETHs and a L2
bridge. Each container had the interface connected to the bridge and in
addition, a TUN interface. The filtering program was run over the TUN
interface.
[control] experiment: 1000 UDP pings were directly sent to the corresponding server over
the regular interface (connected to a L2 bridge).
[treatment] experiment: 1000 UDP pings were sent to the corresponding
server via the tun interface (and then relayed through the regular
interface).
[metric] RTTs were recorded for each experiment.
%}

clear;
clc

data_bridge_tun_active = csvread('ping_rtt_ns_tun_bridge_active.csv') / 1E3;
data_bridge_tun_noactive = csvread('ping_rtt_ns_tun_bridge_noactive.csv') / 1E3;
data_bridge_eth_active = csvread('ping_rtt_ns_eth_bridge_active.csv') / 1E3;
data_bridge_eth_noactive = csvread('ping_rtt_ns_eth_bridge_noactive.csv') / 1E3;

data_switch_tun_active = csvread('ping_rtt_ns_tun_switch_active.csv') / 1E3;
data_switch_tun_noactive = csvread('ping_rtt_ns_tun_switch_noactive.csv') / 1E3;
data_switch_eth_active = csvread('ping_rtt_ns_eth_switch_active.csv') / 1E3;
data_switch_eth_noactive = csvread('ping_rtt_ns_eth_switch_noactive.csv') / 1E3;

figure
cdfplot(data_bridge_tun_active);
hold on
cdfplot(data_bridge_tun_noactive);
hold on
cdfplot(data_bridge_eth_active);
hold on
cdfplot(data_bridge_eth_noactive);
hold on
cdfplot(data_switch_tun_active);
hold on
cdfplot(data);

title('TUN overhead (active header insertion)');
xlabel('RTT Latency (us)');
set(gca, "FontSize", 16);
